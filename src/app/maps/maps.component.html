<section class="max-w-6xl mx-auto p-6 h-full flex flex-col">
  <div class="flex flex-row justify-around m-6">
    <input
      [formControl]="searchFormControl"
      type="text"
      placeholder="Search maps..."
      class="basis-2/4 p-4 border border-zinc-300"
    />
    <app-dropdown
      class="grow-0"
      [config]="dropdownConfig()"
      (optionSelected)="
        $event
          ? this.isAddDialogOpen.set(!this.isAddDialogOpen())
          : this.isDeleteDialogOpen.set(!this.isDeleteDialogOpen())
      "
    >
    </app-dropdown>
  </div>
  <div class="container mx-auto p-4 flex-2">
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-4"
    >
      @for (item of maps(); track $index) {
      <app-card
        [cardConfig]="{
          title: item.title,
          subtitle: datePipe.transform(item.createdAt, 'EEEE, MMMM d, y') || ''
        }"
        (click)="navigateToMarkers(item.mapId)"
      ></app-card>
      }
    </div>
    @if (maps().length === 0) {
    <div class="flex-col justify-center text-center">
      <p class="text-6xl m-10">¯\_(ツ)_/¯</p>
      <p class="text-zinc-800 text-xl m-6">No maps found</p>
    </div>
    }
  </div>
  <app-dialog
    [dialogConfig]="addMapDialogConfig()"
    [open]="isAddDialogOpen()"
    (dialogClosed)="onAddDialogClose($event)"
  >
    <input
      type="text"
      [formControl]="addMapFormControl"
      placeholder="The name of your new map"
      class="w-100 p-4 border"
      [ngClass]="{
        'border-red-700': addMapFormControl.dirty && !addMapFormControl.valid,
        'border-zinc-300': addMapFormControl.valid
      }"
    />
    @if (addMapFormControl.dirty && addMapFormControl.hasError('required')) {
    <div class="text-red-700 font-medium mt-2">A name is required</div>
    }
  </app-dialog>

  <app-dialog
    [dialogConfig]="deleteMapDialogConfig()"
    [open]="isDeleteDialogOpen()"
    (dialogClosed)="onDeleteDialogClose($event)"
  >
    <app-select
      [formControl]="deleteMapFormControl"
      [options]="fetchSelectOptions()"
    ></app-select>
  </app-dialog>
</section>
