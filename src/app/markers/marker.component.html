<section class="max-w-6xl mx-auto p-6">
  <div class="flex items-baseline">
    <a
      class="text-sm font-medium p-2 text-blue-600 underline hover:text-blue-800 cursor-pointer"
      [routerLink]="['/maps']"
      >Yours maps >
    </a>
    <h1 class="text-6xl font-bold p-2">
      {{ map?.title }}
    </h1>
  </div>
  <div class="flex justify-end items-center mb-6">
    <div class="flex gap-2">
      <app-dropdown
        [config]="dropdownConfig()"
        (optionSelected)="onDropdownOptionSelected($event)"
      ></app-dropdown>
      <app-button
        [config]="goToMapButtonConfig"
        (btnClick)="
          router.navigate(['atlas', this.mapId], {
            queryParams: { mapMode: 'move' }
          })
        "
      ></app-button>
    </div>
  </div>
  <div class="container mx-auto p-4">
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-4"
    >
      @for (item of markers(); track $index) {
      <app-card
        [cardConfig]="{
          title: item.title,
          subtitle: item.startDate ?? item.endDate ?? item.createdAt
        }"
        (click)="
          router.navigate(['markers', mapId, 'marker', item.markerId, 'detail'])
        "
      ></app-card>
      } @empty {
      <h1>No markers yet ğŸ¤·â€â™‚ï¸</h1>
      }
    </div>
  </div>
</section>

<app-dialog
  [dialogConfig]="deleteMarkerDialogConfig()"
  [open]="isDeleteMarkerDialogOpen()"
  (dialogClosed)="onDeleteMarkerDialogClosed($event)"
>
  <app-select
    [formControl]="deleteMarkerFormControl"
    [options]="fetchSelectOptions()"
  ></app-select>
</app-dialog>
