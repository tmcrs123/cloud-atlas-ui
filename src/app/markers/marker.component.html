<section class="flex flex-col h-full">
  <div class="flex items-end justify-between mt-6 mb-6">
    <div id="breadcrumbs" class="m-4">
      <a class="text-sm font-medium text-blue-600 underline hover:text-blue-900 cursor-pointer" [routerLink]="['/list']">Your maps > </a>
      <h1 class="text-6xl font-bold">
        {{ map?.title }}
      </h1>
    </div>
    <div class="flex gap-2">
      <app-dropdown class="hidden md:block" [config]="dropdownConfig()" (optionSelected)="onDropdownOptionSelected($event)"></app-dropdown>
      <app-button
        class="hidden md:block"
        [config]="goToMapButtonConfig"
        (btnClick)="
          router.navigate(['world', this.atlasId], {
            queryParams: { mapMode: 'move' }
          })
        "
      ></app-button>
    </div>
  </div>
  <div class="container mx-auto p-4 m-6">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-4">
      @for (item of markers(); track $index) {
      <app-card
        [cardConfig]="{
          title: item.title,
          subtitle: datePipe.transform(item.createdAt, 'EEEE, MMMM d, y') || ''
        }"
        (enterPressed)="router.navigate(['markers', atlasId, 'marker', item.markerId, 'detail'])"
        (click)="router.navigate(['markers', atlasId, 'marker', item.markerId, 'detail'])"
      ></app-card>
      }
    </div>
    @if (markers().length === 0) {
    <div class="flex-col justify-center text-center">
      <p class="text-3xl m-10">¯\_(ツ)_/¯</p>
      <p class="text-zinc-800 text-lg m-3">No markers found</p>
    </div>
    }
  </div>
</section>

<app-dialog [dialogConfig]="deleteMarkerDialogConfig()" [open]="isDeleteMarkerDialogOpen()" (dialogClosed)="onDeleteMarkerDialogClosed($event)">
  <app-select [formControl]="deleteMarkerFormControl" [options]="fetchSelectOptions()"></app-select>
</app-dialog>

<app-button class="flex fixed bottom-10 right-10 md:hidden z-1" [config]="goToMapButtonConfigMobileBtnConfig" (btnClick)="this.goToAtlasView('add')"></app-button>
<app-button
  class="flex fixed bottom-30 right-10 md:hidden z-1"
  [config]="deleteMarkerMobileBtnConfig"
  (btnClick)="this.isDeleteMarkerDialogOpen.set(!this.isDeleteMarkerDialogOpen())"
></app-button>
