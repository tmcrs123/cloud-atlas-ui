<section class="max-w-6xl mx-auto p-6 h-full">
  <div class="flex items-end justify-between mt-6 mb-6">
    <div id="breadcrumbs" class="m-4">
      <a
        class="text-sm font-medium text-blue-600 underline hover:text-blue-900 cursor-pointer"
        [routerLink]="['/maps']"
        >Yours maps >
      </a>
      <h1 class="text-6xl font-bold">
        {{ map?.title }}
      </h1>
    </div>
    <div class="flex gap-2">
      <app-dropdown
        [config]="dropdownConfig()"
        (optionSelected)="onDropdownOptionSelected($event)"
      ></app-dropdown>
      <app-button
        [config]="goToMapButtonConfig"
        (btnClick)="
          router.navigate(['atlas', this.mapId], {
            queryParams: { mapMode: 'move' }
          })
        "
      ></app-button>
    </div>
  </div>
  <div class="container mx-auto p-4 m-6">
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-4"
    >
      @for (item of markers(); track $index) {
      <app-card
        [cardConfig]="{
          title: item.title,
          subtitle: datePipe.transform(item.createdAt, 'EEEE, MMMM d, y') || ''
        }"
        (click)="
          router.navigate(['markers', mapId, 'marker', item.markerId, 'detail'])
        "
      ></app-card>
      } @empty {
      <h1>No markers yet 🤷‍♂️</h1>
      }
    </div>
  </div>
</section>

<app-dialog
  [dialogConfig]="deleteMarkerDialogConfig()"
  [open]="isDeleteMarkerDialogOpen()"
  (dialogClosed)="onDeleteMarkerDialogClosed($event)"
>
  <app-select
    [formControl]="deleteMarkerFormControl"
    [options]="fetchSelectOptions()"
  ></app-select>
</app-dialog>
