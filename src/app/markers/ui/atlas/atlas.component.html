<div class="flex flex-row max-h-full">
  <div class="flex-2">
    <google-map
      [options]="mapOptions()"
      [width]="'100%'"
      [height]="'100%'"
      (mapClick)="isDialogOpen = !isDialogOpen"
      class="cursor-pointer relative"
    >
      @for (existingMarker of existingAtlasMarkers(); track $index) {
      <map-advanced-marker
        #thisMarker="mapAdvancedMarker"
        [options]="existingMarker"
        (mapClick)="thisInfoWindow.open(thisMarker)"
      ></map-advanced-marker>
      <map-info-window
        [options]="infoWindowOptions"
        #thisInfoWindow="mapInfoWindow"
      >
        <button (click)="thisInfoWindow.close()">x</button>
        <h1>{{ existingMarkers()[$index].title }}</h1>
        <a href="">Go to marker</a>
      </map-info-window>
      }
    </google-map>
    <app-dialog
      [dialogConfig]="dialogConfig"
      [open]="isDialogOpen"
      (dialogClosed)="isDialogOpen = !isDialogOpen"
    >
      <input
        type="text"
        name=""
        id=""
        placeholder="name of marker"
        [formControl]="newMarkerNameFormControl"
      />
    </app-dialog>
  </div>
  <div class="flex-1 bg-zinc-100 flex flex-col justify-around p-4">
    <h1 class="text-3xl font-bold text-center">RTW Fiji</h1>

    <div class="overflow-y-auto max-h-6/10">
      @for (item of [1,2,3,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1]; track $index) {
      <app-card
        class="m-2"
        [cardConfig]="{
          title: '❤ Mountain Exploration',
          subtitle: 'Last updated: Jan 10, 2025'
        }"
      ></app-card>
      }
    </div>
    <div class="flex flex-row justify-center mt-7">
      <app-button
        [config]="goBackButtonConfig"
        (click)="router.navigateByUrl('markers')"
      ></app-button>

      @if (mapMode() === 'add') {
      <app-button
        [config]="addButtonConfig"
        (click)="mapMode.set('move')"
      ></app-button>

      }@else {
      <app-button
        [config]="moveButtonConfig"
        (click)="mapMode.set('add')"
      ></app-button>

      }
    </div>
  </div>
</div>
